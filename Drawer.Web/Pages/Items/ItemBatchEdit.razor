@using Drawer.Web.Authentication
@using Drawer.Web.Pages.Items.Models
@using Drawer.Web.Utils

@attribute [Route(Paths.Items.BatchEdit)]

<ContentTitle Text="아이템 일괄 추가" />
<AuthorizeView Context="AuthorizeView" Policy="@Policies.CompanyMember">
    <NotAuthorized>
        <NeedCompany />
    </NotAuthorized>

    <Authorized>
        <AidToolBar>
            <AidButton Color="Color.Error"
                       StartIcon="@Icons.Material.Filled.ArrowBack"
                       OnClick=@(() => Back_Click())>
                뒤로
            </AidButton>
            <AidButton Color="Color.Warning"
                       StartIcon="@Icons.Material.Filled.Clear"
                       OnClick=@(() => Cancel_Click())>
                초기화
            </AidButton>
            <AidButton Color="Color.Tertiary"
                       StartIcon="@Icons.Material.Filled.FileDownload"
                       OnClick=@(() => ExcelDownload_Click())>
                엑셀 폼 다운로드
            </AidButton>
            <AidButton Color="Color.Tertiary"
                       StartIcon="@Icons.Material.Filled.FileUpload"
                       OnClick=@(() => ExcelUpload_Click())>
                엑셀 업로드
            </AidButton>
            <AidButton Color="Color.Secondary"
                       StartIcon="@Icons.Material.Filled.Add"
                       OnClick=@(() => NewRow_Click())>
                행 추가
            </AidButton>
            <AidButton Color="Color.Primary"
                       StartIcon="@Icons.Material.Filled.Save"
                       OnClick=@(() => Save_Click())>
                저장
            </AidButton>
        </AidToolBar>

        <AidTable ReadOnly="false"
                  T="ItemModel"
                  UseRowSelection="false"
                  Items="@ItemList">

            <HeaderContent>
                <MudTHeadRow>
                    <MudTh Style="min-width:100px;">Name</MudTh>
                    <MudTh Style="min-width:100px;">Code</MudTh>
                    <MudTh Style="min-width:100px;">Number</MudTh>
                    <MudTh Style="min-width:100px;">Sku</MudTh>
                    <MudTh Style="min-width:100px;">QuantityUnit</MudTh>
                </MudTHeadRow>
            </HeaderContent>

            <RowTemplate>
                <AidEditCell @bind-Value="context.Name"
                             Validate="((_) => Validate(context, x => x.Name))" />
                <AidEditCell @bind-Value="context.Code"
                             Validate="((_) => Validate(context, x => x.Code))" />
                <AidEditCell @bind-Value="context.Number"
                             Validate="((_) => Validate(context, x => x.Number))" />
                <AidEditCell @bind-Value="context.Sku"
                             Validate="((_) => Validate(context, x => x.Sku))" />
                <AidEditCell @bind-Value="context.QuantityUnit"
                             Validate="((_) => Validate(context, x => x.QuantityUnit))" />
            </RowTemplate>

            <FooterContent>
                <MudTFootRow>
                    <MudTd colSpan="100">총 @(TotalRowCount)개의 행</MudTd>
                </MudTFootRow>
            </FooterContent>

        </AidTable>

    </Authorized>
</AuthorizeView>





